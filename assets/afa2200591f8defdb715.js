import"./index.html";import"./style.scss";const arrInnerTextBtnsEngLower=["`","1","2","3","4","5","6","7","8","9","0","-","=","Backspace","Tab","q","w","e","r","t","y","u","i","o","p","[","]","\\","Del","CapsLock","a","s","d","f","g","h","j","k","l",";","'","Enter","Shift","z","x","c","v","b","n","m",",",".","/","Shift","Ctrl","Win","Alt"," ","Alt","Ctrl","ArrowLeft","ArrowUp","ArrowDown","ArrowRight"],arrInnerTextBtnsEngUpper=["~","!","@","#","$","%","^","&","*","(",")","_","+","Backspace","Tab","Q","W","E","R","T","Y","U","I","O","P","{","}","|","Del","CapsLock","A","S","D","F","G","H","J","K","L",":",'"',"Enter","Shift","Z","X","C","V","B","N","M","<",">","?","Shift","Ctrl","Win","Alt"," ","Alt","Ctrl","ArrowLeft","ArrowUp","ArrowDown","ArrowRight"],arrInnerTextBtnsSlvkLower=[";","~","ľ","š","č","ť","ž","ý","á","í","é","=","-","Backspace","Tab","q","w","e","r","t","z","u","i","o","p","ú","ä","ň","Del","CapsLock","a","s","d","f","g","h","j","k","l","ô","§","Enter","Shift","y","x","c","v","b","n","m",",",".","-","Shift","Ctrl","Win","Alt"," ","Alt","Ctrl","ArrowLeft","ArrowUp","ArrowDown","ArrowRight"],arrInnerTextBtnsSlvkUpper=["°","+","Ľ","Š","Č","Ť","Ž","Ý","Á","Í","É","=","+","Backspace","Tab","Q","W","E","R","T","Z","U","I","O","P","Ú","Ä","Ň","Del","CapsLock","A","S","D","F","G","H","J","K","L","Ô","!","Enter","Shift","Y","X","C","V","B","N","M","?","_","+","Shift","Ctrl","Win","Alt"," ","Alt","Ctrl","ArrowLeft","ArrowUp","ArrowDown","ArrowRight"],eventCodes=["Backquote","Digit1","Digit2","Digit3","Digit4","Digit5","Digit6","Digit7","Digit8","Digit9","Digit0","Minus","Equal","Backspace","Tab","KeyQ","KeyW","KeyE","KeyR","KeyT","KeyY","KeyU","KeyI","KeyO","KeyP","BracketLeft","BracketRight","Backslash","Delete","CapsLock","KeyA","KeyS","KeyD","KeyF","KeyG","KeyH","KeyJ","KeyK","KeyL","Semicolon","Quote","Enter","ShiftLeft","KeyZ","KeyX","KeyC","KeyV","KeyB","KeyN","KeyM","Comma","Period","Slash","ShiftRight","ControlLeft","MetaLeft","AltLeft","Space","AltRight","ControlRight","ArrowLeft","ArrowUp","ArrowDown","ArrowRight"];let lowerLetters=JSON.parse(window.localStorage.getItem("languageLowerLetters")),upperLetters=JSON.parse(window.localStorage.getItem("languageUpperLetters"));const lowerLettersSlovak=arrInnerTextBtnsSlvkLower,upperLettersSlovak=arrInnerTextBtnsSlvkUpper;localStorage.getItem("languageLowerLetters","languageUpperLetters")||(localStorage.setItem("languageLowerLetters",JSON.stringify(arrInnerTextBtnsEngLower)),localStorage.setItem("languageUpperLetters",JSON.stringify(arrInnerTextBtnsEngUpper)),window.location.reload());const createComponent=function(e,t){const s=document.createElement(e,t);return s.classList.add(t),s},createButtons=function(e){arrInnerTextBtnsEngLower.forEach((t=>{const s=createComponent("div","single-key");"Tab"===t&&s.classList.add("single-key--tab"),"CapsLock"!==t&&"Enter"!==t&&"Backspace"!==t||s.classList.add("single-key--backspace"),"Shift"===t&&s.classList.add("single-key--shift")," "===t&&(s.classList.add("single-key--space"),s.innerText=""),e.append(s)}))},createWorkArea=function(){const e=createComponent("div","main-div");document.body.append(e);const t=createComponent("h1","title");t.innerText="RSS Virtual keyboard",e.append(t);const s=createComponent("textarea","text-area");e.append(s),e.cols=20,s.focus();const n=createComponent("div","keyboard");e.append(n),createButtons(n);const a=createComponent("p","description");a.innerText="The keyboard was created in the Windows OS. Switch language: ShiftLeft + AltLeft",e.append(a)};function addInnerTextToButtons(e){document.querySelectorAll(".single-key").forEach(((t,s)=>{const n=t;n.innerText=e[s],60===s&&(n.classList.add("single-key--arrow-left"),n.innerText="❯"),63===s&&(n.classList.add("single-key--arrow-right"),n.innerText="❯"),62===s&&(n.classList.add("single-key--arrow-down"),n.innerText="❯"),61===s&&(n.classList.add("single-key--arrow-up"),n.innerText="❯")}))}createWorkArea(),addInnerTextToButtons(lowerLetters),document.querySelectorAll(".single-key").forEach(((e,t)=>{const s=eventCodes[t];e.setAttribute("data-key",s)}));let counterChangeLanguage=0;const addActiveClassButton=function(e){const t=document.querySelector(".keyboard"),s=document.querySelector(".text-area");if(s.focus(),e.shiftKey&&e.altKey&&0===counterChangeLanguage?([lowerLetters,upperLetters]=[lowerLettersSlovak,upperLettersSlovak],counterChangeLanguage+=1,localStorage.setItem("languageLowerLetters",JSON.stringify(lowerLetters)),localStorage.setItem("languageUpperLetters",JSON.stringify(upperLetters))):e.shiftKey&&e.altKey&&1===counterChangeLanguage&&([lowerLetters,upperLetters]=[arrInnerTextBtnsEngLower,arrInnerTextBtnsEngUpper],counterChangeLanguage=0,localStorage.setItem("languageLowerLetters",JSON.stringify(lowerLetters)),localStorage.setItem("languageUpperLetters",JSON.stringify(upperLetters))),"ShiftRight"===e.code||"ShiftLeft"===e.code||"ControlLeft"===e.code||"ControlRight"===e.code||"AltRight"===e.code||"AltLeft"===e.code||"Space"===e.code||"Delete"===e.code||"ArrowLeft"===e.code||"ArrowRight"===e.code||"ArrowUp"===e.code||"ArrowDown"===e.code||"ArrowUp"===e.code||"MetaLeft"===e.code||"Tab"===e.code||"CapsLock"===e.code||"Enter"===e.code||"Backspace"===e.code)switch(e.code){case"ShiftLeft":t.children[42].classList.add("single-key--active"),t.children[29].classList.contains("single-key--active")?addInnerTextToButtons(lowerLetters):t.children[29].classList.contains("single-key--active")||addInnerTextToButtons(upperLetters);break;case"ShiftRight":t.children[53].classList.add("single-key--active"),t.children[29].classList.contains("single-key--active")?addInnerTextToButtons(lowerLetters):t.children[29].classList.contains("single-key--active")||addInnerTextToButtons(upperLetters);break;case"ControlLeft":t.children[54].classList.add("single-key--active");break;case"ControlRight":t.children[59].classList.add("single-key--active");break;case"AltRight":t.children[58].classList.add("single-key--active"),"AltRight"===e.code&&e.preventDefault();break;case"AltLeft":t.children[56].classList.add("single-key--active"),"AltLeft"===e.code&&e.preventDefault();break;case"Space":t.children[57].classList.add("single-key--active");break;case"Delete":t.children[28].classList.add("single-key--active");break;case"Enter":t.children[41].classList.add("single-key--active");break;case"Backspace":t.children[13].classList.add("single-key--active");break;case"ArrowLeft":t.children[60].classList.add("single-key--active");break;case"ArrowRight":t.children[63].classList.add("single-key--active");break;case"ArrowUp":t.children[61].classList.add("single-key--active");break;case"ArrowDown":t.children[62].classList.add("single-key--active");break;case"MetaLeft":t.children[55].classList.add("single-key--active");break;case"Tab":t.children[14].classList.add("single-key--active"),"Tab"===e.code&&(e.preventDefault(),s.setRangeText("   ",s.selectionStart,s.selectionEnd,"end"));break;case"CapsLock":t.children[29].classList.contains("single-key--active")?t.children[29].classList.contains("single-key--active")&&(t.children[29].classList.remove("single-key--active"),addInnerTextToButtons(lowerLetters)):(t.children[29].classList.add("single-key--active"),addInnerTextToButtons(upperLetters))}else{e.preventDefault();const t=document.querySelector(`.single-key[data-key="${e.code}"]`);s.setRangeText(t.innerText,s.selectionStart,s.selectionEnd,"end"),t.classList.add("single-key--active")}},removeActiveClassButton=function(e){const t=document.querySelector(".keyboard"),s=document.querySelectorAll(".single-key");"ShiftLeft"!==e.code&&"ShiftRight"!==e.code||!t.children[53].classList.contains("single-key--active")&&!t.children[42].classList.contains("single-key--active")||(t.children[42].classList.remove("single-key--active"),t.children[53].classList.remove("single-key--active")),"ShiftLeft"===e.code&&(t.children[42].classList.remove("single-key--active"),addInnerTextToButtons(lowerLetters)),"ShiftRight"===e.code&&(t.children[53].classList.remove("single-key--active"),addInnerTextToButtons(lowerLetters)),("ShiftLeft"===e.code&&t.children[29].classList.contains("single-key--active")||"ShiftRight"===e.code&&t.children[29].classList.contains("single-key--active"))&&addInnerTextToButtons(upperLetters),"ShiftLeft"!==e.code&&t.children[42].classList.contains("single-key--active")&&s.forEach((e=>{e.classList.remove("single-key--active"),t.children[42].classList.add("single-key--active")})),"ShiftRight"!==e.code&&t.children[53].classList.contains("single-key--active")&&s.forEach((e=>{e.classList.remove("single-key--active"),t.children[53].classList.add("single-key--active")})),t.children[53].classList.contains("single-key--active")||t.children[42].classList.contains("single-key--active")||"CapsLock"===e.code||!t.children[29].classList.contains("single-key--active")||s.forEach((e=>{e.classList.remove("single-key--active"),t.children[29].classList.add("single-key--active")})),t.children[53].classList.contains("single-key--active")||t.children[42].classList.contains("single-key--active")||"CapsLock"===e.code||t.children[29].classList.contains("single-key--active")||s.forEach((e=>{e.classList.remove("single-key--active")}))};document.addEventListener("keydown",addActiveClassButton),document.addEventListener("keyup",removeActiveClassButton);const buttons=document.querySelectorAll(".single-key");buttons.forEach((e=>{const t=document.querySelector(".text-area"),s=document.querySelector(".keyboard");let n=0,a=!1;e.addEventListener("mousedown",(r=>{t.focus(),e.classList.add("single-key--active"),1===r.target.innerText.length&&"❯"!==r.target.innerText?t.setRangeText(r.target.innerText,t.selectionEnd,t.selectionStart,"end"):"Tab"===r.target.innerText?t.setRangeText("   ",t.selectionStart,t.selectionEnd,"end"):r.target.classList.contains("single-key--space")?t.setRangeText(" ",t.selectionStart,t.selectionEnd,"end"):"Backspace"===r.target.innerText&&t.value.length>0?t.setRangeText("",t.selectionStart-1,t.selectionEnd,"end"):r.target.classList.contains("single-key--arrow-right")?t.setRangeText("",t.selectionStart+1,t.selectionEnd+1,"end"):r.target.classList.contains("single-key--arrow-left")?t.setRangeText("",t.selectionStart-1,t.selectionEnd-1,"end"):r.target.classList.contains("single-key--arrow-down")?t.setRangeText("",0,0,"end"):r.target.className.includes("single-key--arrow-up")?t.setRangeText("",t.value.length,t.value.length,"end"):"CapsLock"===r.target.innerText?0===n?(addInnerTextToButtons(upperLetters),n+=1):(addInnerTextToButtons(lowerLetters),n=0):r.target.classList.contains("single-key--shift")?s.children[29].classList.contains("single-key--active")?s.children[29].classList.contains("single-key--active")&&(addInnerTextToButtons(lowerLetters),a=!0):(addInnerTextToButtons(upperLetters),a=!1):"Enter"===r.target.innerText?t.setRangeText("\n",t.selectionStart,t.selectionEnd,"end"):"Del"===r.target.innerText&&t.value.length>0?t.setRangeText("",t.selectionStart,t.selectionEnd+1,"end"):r.target.classList.contains("single-key")&&r.target.classList.add("single-key--active")})),e.addEventListener("mouseup",(r=>{t.focus(),"CapsLock"===r.target.innerText&&1===n?r.target.classList.add("single-key--active"):!1!==a||s.children[29].classList.contains("single-key--active")?!0===a?(addInnerTextToButtons(upperLetters),r.target.classList.remove("single-key--active")):e.classList.remove("single-key--active"):(addInnerTextToButtons(lowerLetters),r.target.classList.remove("single-key--active"))}))}));